function enviar(){var a=pasoRevisar();if(a===null){return}pasoResultados(a);pasoTablaCorrecta(a);pasoTablaBancaria(a);document.getElementById("resultado").style.display="block"}function pasoRevisar(){var c=document.getElementById("capital");var b=document.getElementById("duracion");var f=document.getElementById("interes");var a=document.getElementById("idioma").value;var d={es:{iec:"Introduzca el capital.",cdn:"El capital debe ser un número positivo.",ild:"Introduzca la duración.",dse:"La duración debe ser un entero.",dsm:"La duración debe ser mínimo uno.",iei:"Introduzca el interés.",isn:"El interés debe ser un número.",iey:"El interés debe estar entre 0.01 y 100.00 ."},en:{iec:"Enter capital.",cdn:"Capital must be a positive number.",ild:"Enter the duration.",dse:"The duration must be an integer.",dsm:"The duration should be at least one.",iei:"Enter the interest.",isn:"The interest must be a number.",iey:"The interest must be between 0.01 and 100.00 ."}};var e="";if(c.value==""){e+=d[a]["iec"]+"\n"}else{capital=parseFloat(c.value);if(capital!=capital){e+=d[a]["cdn"]+"\n"}else{if(capital<0){e+=d[a]["cdn"]+"\n"}}}if(b.value==""){e+=d[a]["ild"]+"\n"}else{duracion=parseInt(b.value,10);if(duracion!=duracion){e+=d[a]["dse"]+"\n"}else{if(duracion<=0){e+=d[a]["dsm"]+"\n"}}}if(f.value==""){e+=d[a]["iei"]+"\n"}else{interes=parseFloat(f.value);if(interes!=interes){e+=d[a]["isn"]+"\n"}else{if(interes<0.01||interes>100){e+=d[a]["iey"]+"\n"}}}if(e!=""){window.alert(e);return null}return{capital:capital,duracion:duracion,interes:interes}}function calcularPago(a,c,b){return b/((1-1/Math.pow(1+a,c))/a)}function calcularResultados(b){var a={};interes=b.interes/100;interesM=(Math.pow(1+interes,1/12)-1);interesMB=interes/12;interesB=Math.pow(1+interesMB,12)-1;a.interes=b.interes;a.interesB=100*interesB;a.cuota=calcularPago(interesM,b.duracion*12,b.capital);a.cuotaB=calcularPago(interesMB,b.duracion*12,b.capital);a.pagoExtA=(a.cuotaB-a.cuota)*12;a.pagoExtT=a.pagoExtA*b.duracion;return a}function pasoResultados(a){mensaje="";dResultado=calcularResultados(a);document.getElementById("interesC").childNodes[0].nodeValue=dResultado.interes.toFixed(2)+"%";document.getElementById("interesB").childNodes[0].nodeValue=dResultado.interesB.toFixed(2)+"%";document.getElementById("cuotaC").childNodes[0].nodeValue=dResultado.cuota.toFixed(2);document.getElementById("cuotaB").childNodes[0].nodeValue=dResultado.cuotaB.toFixed(2);document.getElementById("pagoA").childNodes[0].nodeValue=dResultado.pagoExtA.toFixed(2);document.getElementById("pagoT").childNodes[0].nodeValue=dResultado.pagoExtT.toFixed(2)}function borrarCeldasValores(a){while(a.rows.length>3){a.deleteRow(-1)}}function insertarCelda(d,a){var c=document.createElement("td");var b=document.createTextNode(a);c.appendChild(b);d.appendChild(c)}function insertarFila(d,b){var c=d.insertRow(-1);for(var a=0;a<b.length;a++){insertarCelda(c,b[a])}}function pasoTablaCorrecta(a){deuda=a.capital;interes=a.interes/100;k=0;interesM=(Math.pow(1+interes,1/12)-1);cuota=calcularPago(interesM,a.duracion*12,a.capital);tabla=document.getElementById("correcta");borrarCeldasValores(tabla);insertarFila(tabla,[0,0,deuda.toFixed(2),"",""]);for(var c=1;c<=a.duracion;c++){sPagoInt=0;for(var b=1;b<=12;b++){k++;pagoInt=deuda*interesM;sPagoInt+=pagoInt;amortiz=cuota-pagoInt;deuda-=amortiz;insertarFila(tabla,["",k,deuda.toFixed(2),amortiz.toFixed(2),pagoInt.toFixed(2)])}insertarFila(tabla,[c,"","","",sPagoInt.toFixed(2)])}}function pasoTablaBancaria(a){deuda=a.capital;interes=a.interes/100;k=0;interesM=(Math.pow(1+interes,1/12)-1);interesMB=interes/12;cuota=calcularPago(interesMB,a.duracion*12,a.capital);tabla=document.getElementById("bancaria");borrarCeldasValores(tabla);insertarFila(tabla,[0,0,deuda.toFixed(2),"","",""]);for(var c=1;c<=a.duracion;c++){sPagoInt=0;sIdi=0;for(var b=1;b<=12;b++){k++;idi=interesM*(deuda+sIdi);sIdi+=idi;pagoInt=deuda*interesMB;sPagoInt+=pagoInt;amortiz=cuota-pagoInt;deuda-=amortiz;insertarFila(tabla,["",k,deuda.toFixed(2),amortiz.toFixed(2),pagoInt.toFixed(2),idi.toFixed(2)])}insertarFila(tabla,[c,"","","",sPagoInt.toFixed(2),sIdi.toFixed(2)])}};